; Generate a stairs waveform.

START:
	MOV P2, #0E8H
	MOV R0, #03H
	MOV A, #80H
	MOVX @R0, A

REPEAT:
	CLR A
	MOV R0, A

	MOV A, #0FFH  		; INITIALISE
	LCALL DELAY

WAVE:
	MOVX @R0, A
	SUBB A, #55H  		; ONE THIRD OF #0FFH
	LCALL DELAY
	CJNE A, #00H, WAVE

	SJMP REPEAT

DELAY:
	; AWAIT (0FH*0FFH*0FFH*02H) MACHINE CYCLES
	MOV R1, #0FH
	UP1:
		MOV R2, #0FFH
		UP2:
			MOV R3, #0FFH
			UP3:
				NOP
				NOP
			DJNZ R3, UP3
		DJNZ R2, UP2
	DJNZ R1, UP1

	RET 				; RETURN BACK TO THE MAIN LOOP
	END
