; Input a 4-digit HEX address of a memory location from
; the keyboard and display its content in the data field
; of the display when “NEXT” key is pressed.

; LITTLE ENDIAN CONVENTION

MOV R0, #04H 				; 78 04 	; REPEAT COUNT
INPUT:
	LCALL RDKBD 	 		; 12 02 A2 	; READ KEYBOARD
	PUSH A 	 				; C0 E0 	; SAVE INPUT CHARACTER
	DJNZ R0, INPUT 			; D8 _ 		; REPEAT IN A LOOP

	LCALL RDKBD				; 12 02 A2 	; CHECK FOR NEXT KEY PRESS
	CJNE A, #14H, START 	; B4 14 _ 	; BREAK OUT IF NEXT KEY NOT PRESSED

MOV R0, #83H 				; 78 83 	; TO PACK DATA TO (DPH, DPL)
MOV 50H, #81H 				; 75 81 50 	; FOR LOOP EXIT CONDITION
PACK:
	POP A 	 				; D0 E0 	; GET HIGHER NIBBLE
	SWAP A 					; C4 		; SWAP TO ALLOW FOR PACKING DATA
	MOV @R0, A 				; A6 E0 	; MOVE TO DESTINATION (DP_)

	POP A 	 				; D0 E0 	; GET LOWER NIBBLE
	ORL A, @R0				; 46 		; PACK THE DATA, STORE IN ACCUMULATOR
	MOV @R0, A 				; A6 E0 	; MOVE TO DESTINATION (DP_)

	DEC R0 					; 18 		; DECREMENT TO POINT TO PREVIOUS ADDRESS
	CJNE @R0, 50H, PACK 	; 86 50 _ 	; CHECK IF DONE TWICE? FOR (DPH, DPL)

MOVX A, @DPTR 				; E0 		; GET DATA FROM INPUTTED LOCATION
MOV 60H, A 					; F5 60  	; DISPLAY PLACEHOLDER
LCALL UPPDT 				; 12 01 9B 	; DISPLAY ROUTINE

RDKBD:
	RET
UPDDT:
	RET
END