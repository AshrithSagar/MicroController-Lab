; DECIMAL DOWN COUNTER

; 8000H
START:
	MOV DPTR, #0E803H 			; 90 E8 03 	; CONFIGURE 8255 CONTROL WORD, JUNCTION-2
	MOV A, #10000000B 			; 74 80 	; PORT A AS OUTPUT, 
	MOVX @DPTR, A 				; F0 		; WRITE THE CONTROL WORD
		
	MOV R0, #99 				; 78 63 	; INITIALISE COUNTER

DECIMAL_DOWN_COUNTER:
	MOV A, R0 					; E8 		; RETRIEVE THE SAVED COUNTER
	ADD A, #0FFH 				; 24 FF 	; INCREMENT COUNTER
	DA A 						; D4 		; DECIMALLY ADJUST THE ACCUMULATOR
	MOV R0, A 					; F8 		; STORE THE NEW COUNT
	
	MOV DPTR, #0E800H 			; 90 E8 00 	; PORT A
	MOVX @DPTR, A 				; F0 		; WRITE TO PORT-A
	LCALL DELAY 				; 12 A0 00 	; AWAIT
	
	SJMP DECIMAL_DOWN_COUNTER 	; 80 _F2 	; REPEAT THE COUNTER

; A000H
DELAY:
	MOV R3, #04H 				; 7B 04
	UP1:
		MOV R4, #0FFH 			; 7C FF
		UP2:
			MOV R5, #0FFH 		; 7D FF
			UP3:
			DJNZ R5, UP3 		; DD _FE
		DJNZ R4, UP2 			; DC _FA
	DJNZ R3, UP1 				; DB _F6
	RET 						; 22 		; RETURN BACK TO THE MAIN FUNCTION
